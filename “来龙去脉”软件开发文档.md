# “来龙去脉”事件追踪器软件开发文档


## 一、项目背景与目的
当前社会热点事件频发，但事件热度消退后，用户难以便捷获取后续进展。为解决这一问题，本项目旨在开发一款“来龙去脉”事件追踪器软件，帮助用户高效追踪事件的完整过程及后续动态。

软件核心功能如下：
1. **事件信息查询**：用户输入事件名称后，系统自动搜索相关新闻，经分析后返回事件的核心要素及完整时间线。
2. **事件收藏与动态更新**：用户可收藏事件信息；收藏后，系统将在后台定时（如每日上午6点）自动搜索该事件的新进展，若有更新则同步至收藏内容，无新信息则不执行操作。


## 二、项目架构与技术栈
1. **架构**：采用前后端分离架构的Web应用。
2. **技术栈**：
   - 前端：Vue3.js + Element Plus
   - 后端：Python + Flask（运行于虚拟环境）
   - 数据库：SQLite
   - 功能支持：扣子（coze）工作流
   - 注册登录：基于手机号的注册（通过短信发送验证码）及登录功能


## 三、具体实现要求
### （一）后端功能实现
1. **事件名称优化**
   - 依赖扣子（coze）工作流实现，调用规范参考“coze调用流程说明.txt”。
   - 流程：接收用户输入的事件名称后，调用【Event_Name_Identification】工作流。
   - 工作流返回规则：
     - 若输入内容合格，返回原文本字符串；
     - 若输入内容需优化，返回优化后的事件名称字符串；
     - 若输入内容与事件无关，固定返回“您输入的内容与事件无关，请输入事件名称。”。

2. **新闻搜集功能**
   - 依赖扣子（coze）工作流实现，调用规范参考“coze调用流程说明.txt”。
   - 流程：调用【Event_Collection】工作流，传入事件名称（经优化后的有效名称）。
   - 返回值：包含输入的事件名称及搜集到的新闻列表（字符串数组）。

3. **新闻分析功能**
   - 依赖扣子（coze）工作流实现，调用规范参考“coze调用流程说明.txt”。
   - 流程：调用【Event_Analysis】工作流，传入事件名称及新闻列表（字符串数组）。
   - 输出：事件总结，包含以下9个变量：
     - [1] event_name：String类型，事件名称；
     - [2] key_men：String类型，事件核心人物；
     - [3] event_overview：String类型，事件总览；
     - [4] key_point：String类型，事件关键讨论点；
     - [5] latest：String类型，事件最新进展；
     - [6] event_cause：String类型，事件起因；
     - [7] event_process：String类型，事件经过；
     - [8] event_result：String类型，事件结果；
     - [9] timeline：Object数组类型，事件完整时间线，每个Object包含：
       - time：String类型，时间点；
       - event_phase：String类型，事件阶段；
       - involved_people：String类型，涉及人物；
       - plot_description：String类型，事件情节描述；
       - evidence：String类型，证明材料。

4. **登录注册功能（用户验证）**
   - 方式：通过手机号收发6位短信验证码完成注册与登录，以手机号作为用户唯一标识。
   - 约束：同一手机号不可重复注册。

5. **收藏功能**
   - 前提：验证用户已登录。
   - 操作：将【Event_Analysis】工作流返回的事件总结内容存入数据库，并与当前用户关联。

6. **后台定时更新收藏事件功能**
   - 实现：通过Python脚本配置定时任务，定时触发【Event_Update】工作流调用（该工作流暂未实现，需预留接口），用于更新收藏事件的信息。


### （二）前端界面要求
- **设计原则**：界面需美观、布局合理，确保用户视觉体验舒适且易于操作。
- **设计元素**：可包含与新闻、事件、放大镜、追踪器、侦探等相关的元素。

1. **首页（搜索与结果显示页）**
   - 包含三部分，按顺序显示：
     - 【搜索栏】：由搜索框（供用户输入事件名称）和搜索按钮组成。
       - 交互流程：用户输入事件名称→点击搜索按钮→后端调用【Event_Name_Identification】工作流→根据返回值处理：
         - 若返回固定提示语“您输入的内容与事件无关，请输入事件名称。”，则弹窗显示该信息；
         - 若返回有效事件名称，则调用【Event_Collection】工作流获取新闻列表，再调用【Event_Analysis】工作流生成事件总结。
     - 【事件总结】：仅在用户搜索且coze工作流返回结果后显示（首页默认仅显示搜索栏）。
       - 包含三部分：
         1. 依次显示：事件名称（对应event_name）、事件核心人物（对应key_men）、事件总览（对应event_overview）、事件关键讨论点（对应key_point）、事件最新进展（对应latest）；
         2. 依次显示：事件起因（对应event_cause）、事件经过（对应event_process）、事件结果（对应event_result）；
         3. 显示事件完整时间线（对应timeline）。
       - 附加元素：收藏按钮，点击后将事件总结保存至收藏页（仅用户登录后可见可用）。
     - 【新闻列表】：在【Event_Collection】工作流返回新闻列表后立即显示，无需等待【Event_Analysis】工作流分析完成。

2. **收藏页**
   - 访问限制：仅登录用户可进入，未登录用户禁止访问。
   - 包含两部分：
     - 【收藏列表】：左侧列表，仅显示收藏事件的名称（event_name）；点击某事件名称后，右侧显示该事件的完整总结。
     - 【事件总结】：右侧显示，样式与首页一致；页面右上角需添加刷新按钮，供用户手动触发事件进展搜索。

3. **用户页**
   - 访问限制：收藏功能仅登录用户可使用，未登录用户禁止使用。
   - 包含三部分：
     - 【登录界面】：显示手机号输入框、验证码输入框（支持短信获取）、登录按钮，及注册按钮。
     - 【注册弹窗】：点击注册按钮后弹出，包含手机号输入框、验证码输入框、“发送验证码”按钮、“确认注册”按钮。
     - 【用户信息界面】：用户登录后显示，包含用户手机号等个人信息。